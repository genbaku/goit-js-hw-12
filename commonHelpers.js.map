{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nconst apiKey = \"41526510-fe2a9843669a4013cb75574c6\";\nconst apiUrl = \"https://pixabay.com/api/\";\nconst gallery = document.querySelector(\".gallery\");\nconst searchForm = document.querySelector(\".search-form\");\nconst loader = document.querySelector(\".loader-container\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener(\"submit\", async function (event) {\n    event.preventDefault();\n    currentQuery = document.querySelector(\".search-query\").value;\n    currentPage = 1;\n    await searchImages(currentQuery);\n});\n\nloadMoreBtn.addEventListener(\"click\", function () {\n    currentPage++;\n    searchImages(currentQuery, currentPage);\n});\n\nasync function searchImages(query, page = 1) {\n    loader.style.display = \"flex\";\n    try {\n        const response = await axios.get(apiUrl, {\n            params: {\n                key: apiKey,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: 40\n            },\n        });\n\n        const data = response.data;\n        if (currentPage === 1) {\n            gallery.innerHTML = \"\"; \n        }\n\n        displayImages(data.hits);\n        if (page * 40 >= data.totalHits) {\n            loadMoreBtn.style.display = \"none\";\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        } else {\n            loadMoreBtn.style.display = \"block\";\n        }\n\n        const cardHeight = gallery.querySelector(\".image-card\").getBoundingClientRect().height;\n        window.scrollBy(0, cardHeight * 2);\n\n    } catch (error) {\n        showError(\"An error occurred. Please try again.\");\n        console.error(\"Axios error:\", error);\n\n    } finally {\n        loader.style.display = \"none\";\n    }\n}\n\nfunction displayImages(images) {\n    if (currentPage === 1) {\n        gallery.innerHTML = \"\";\n    }\n\n    if (images.length === 0 && currentPage === 1) {\n        showError(\"Sorry, there are no images matching your search query. Please try again!\");\n        return;\n    }\n\n    images.forEach(function (image) {\n        const card = document.createElement(\"div\");\n        card.classList.add(\"image-card\");\n        card.innerHTML = `\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <div class=\"image-info\">\n                <p>Likes: ${image.likes}</p>\n                <p>Views: ${image.views}</p>\n                <p>Comments: ${image.comments}</p>\n                <p>Downloads: ${image.downloads}</p>\n            </div>\n        `;\n        gallery.appendChild(card);\n    });\n\n    const lightbox = new SimpleLightbox('.image-card a', {\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n\nfunction showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message || 'An error occurred. Please try again.',\n    });\n}"],"names":["apiKey","apiUrl","gallery","searchForm","loader","loadMoreBtn","currentPage","currentQuery","event","searchImages","query","page","data","axios","displayImages","showError","cardHeight","error","images","image","card","SimpleLightbox","message","iziToast"],"mappings":"owBAMA,MAAMA,EAAS,qCACTC,EAAS,2BACTC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,mBAAmB,EACnDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAc,EACdC,EAAe,GAEnBJ,EAAW,iBAAiB,SAAU,eAAgBK,EAAO,CACzDA,EAAM,eAAc,EACpBD,EAAe,SAAS,cAAc,eAAe,EAAE,MACvDD,EAAc,EACd,MAAMG,EAAaF,CAAY,CACnC,CAAC,EAEDF,EAAY,iBAAiB,QAAS,UAAY,CAC9CC,IACAG,EAAaF,EAAcD,CAAW,CAC1C,CAAC,EAED,eAAeG,EAAaC,EAAOC,EAAO,EAAG,CACzCP,EAAO,MAAM,QAAU,OACvB,GAAI,CAaA,MAAMQ,GAZW,MAAMC,EAAM,IAAIZ,EAAQ,CACrC,OAAQ,CACJ,IAAKD,EACL,EAAGU,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACb,CACb,CAAS,GAEqB,KAClBL,IAAgB,IAChBJ,EAAQ,UAAY,IAGxBY,EAAcF,EAAK,IAAI,EACnBD,EAAO,IAAMC,EAAK,WAClBP,EAAY,MAAM,QAAU,OAC5BU,EAAU,4DAA4D,GAEtEV,EAAY,MAAM,QAAU,QAGhC,MAAMW,EAAad,EAAQ,cAAc,aAAa,EAAE,sBAAuB,EAAC,OAChF,OAAO,SAAS,EAAGc,EAAa,CAAC,CAEpC,OAAQC,EAAP,CACEF,EAAU,sCAAsC,EAChD,QAAQ,MAAM,eAAgBE,CAAK,CAE3C,QAAc,CACNb,EAAO,MAAM,QAAU,MAC1B,CACL,CAEA,SAASU,EAAcI,EAAQ,CAK3B,GAJIZ,IAAgB,IAChBJ,EAAQ,UAAY,IAGpBgB,EAAO,SAAW,GAAKZ,IAAgB,EAAG,CAC1CS,EAAU,0EAA0E,EACpF,MACH,CAEDG,EAAO,QAAQ,SAAUC,EAAO,CAC5B,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,YAAY,EAC/BA,EAAK,UAAY;AAAA,uBACFD,EAAM;AAAA,4BACDA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA,4BAGlCA,EAAM;AAAA,4BACNA,EAAM;AAAA,+BACHA,EAAM;AAAA,gCACLA,EAAM;AAAA;AAAA,UAG9BjB,EAAQ,YAAYkB,CAAI,CAChC,CAAK,EAEgB,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,gBAAiB,SACjB,aAAc,GACtB,CAAK,EACQ,QAAO,CACpB,CAEA,SAASN,EAAUO,EAAS,CACxBC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,GAAW,sCAC5B,CAAK,CACL"}